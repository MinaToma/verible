# SystemVerilog Lexer and Parser

<!--*
freshness: { owner: 'fangism' reviewed: '2020-10-04' }
*-->

This directory contains the SystemVerilog lexer and parser implementations.

## Lexer

The lexer is generated by [Flex](https://www.gnu.org/software/flex/). Token
enumerations come from the [parser](verilog.y). The generated lexer
implementation is wrapped in an [adapter](verilog_lexer.h) that makes it return
tokens (instead of just an `int`).

### Token Classifications

[Token classification functions](verilog_token_classifications.h) provides
functions that logically group together sets of token enumerations, so that
client code does not have to repeat the same logic in different places.

## Parser

The parser is generated by [Bison](https://www.gnu.org/software/bison/), an
LALR(1) parser generator. The generated parser implementation is wrapped in an
[adapter](verilog_parser.h) that allows it to work on tokens from any source,
not just the lexer. This gives developers the opportunity to inserter filtering
or transformation passes between the lexer and parser.

## Lexical Context

Parsing SystemVerilog is wrought with challenges that defy conventional LR-
grammars. LexicalContext is a token transformation pass that aims to help the
Bison-generated parser implementation by:

1.  Disambiguating tokens that are used in multiple syntactic contexts.
1.  Performing distance lookahead that would otherwise not be expressible in an
    LR grammar.

It operates like a composition of state-machines that scan and mutate tokens.
